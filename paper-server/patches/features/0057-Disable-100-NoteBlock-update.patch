From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: LanzoZ <bhbxgre@gmail.com>
Date: Sat, 7 Feb 2026 23:17:43 +0700
Subject: [PATCH] Disable 100% NoteBlock update


diff --git a/net/minecraft/world/level/block/NoteBlock.java b/net/minecraft/world/level/block/NoteBlock.java
index 1335e4e9953444417325bbfd9655d5b9bb004ff8..e957aa994f173cd028c40ceff61b966ad476a37f 100644
--- a/net/minecraft/world/level/block/NoteBlock.java
+++ b/net/minecraft/world/level/block/NoteBlock.java
@@ -64,8 +64,9 @@ public class NoteBlock extends Block {
 
     @Override
     public BlockState getStateForPlacement(BlockPlaceContext context) {
-        if (io.papermc.paper.configuration.GlobalConfiguration.get().blockUpdates.disableNoteblockUpdates) return this.defaultBlockState(); // Paper - place without considering instrument
-        return this.setInstrument(context.getLevel(), context.getClickedPos(), this.defaultBlockState());
+        return this.defaultBlockState();
+        /*if (io.papermc.paper.configuration.GlobalConfiguration.get().blockUpdates.disableNoteblockUpdates) return this.defaultBlockState(); // Paper - place without considering instrument
+        return this.setInstrument(context.getLevel(), context.getClickedPos(), this.defaultBlockState());*/
     }
 
     @Override
@@ -79,16 +80,20 @@ public class NoteBlock extends Block {
         BlockState neighborState,
         RandomSource random
     ) {
-        if (io.papermc.paper.configuration.GlobalConfiguration.get().blockUpdates.disableNoteblockUpdates) return state; // Paper - prevent noteblock instrument from updating
+        return state;
+        /*if (io.papermc.paper.configuration.GlobalConfiguration.get().blockUpdates.disableNoteblockUpdates) return state; // Paper - prevent noteblock instrument from updating
         boolean flag = direction.getAxis() == Direction.Axis.Y;
         return flag
             ? this.setInstrument(level, pos, state)
             : super.updateShape(state, level, scheduledTickAccess, pos, direction, neighborPos, neighborState, random);
+        */
     }
 
+
     @Override
     protected void neighborChanged(BlockState state, Level level, BlockPos pos, Block neighborBlock, @Nullable Orientation orientation, boolean movedByPiston) {
-        if (io.papermc.paper.configuration.GlobalConfiguration.get().blockUpdates.disableNoteblockUpdates) return; // Paper - prevent noteblock powered-state from updating
+
+        /*if (io.papermc.paper.configuration.GlobalConfiguration.get().blockUpdates.disableNoteblockUpdates) return; // Paper - prevent noteblock powered-state from updating
         boolean hasNeighborSignal = level.hasNeighborSignal(pos);
         if (hasNeighborSignal != state.getValue(POWERED)) {
             if (hasNeighborSignal) {
@@ -98,13 +103,15 @@ public class NoteBlock extends Block {
 
             level.setBlock(pos, state.setValue(POWERED, hasNeighborSignal), Block.UPDATE_ALL);
         }
+
+         */
     }
 
     private void playNote(@Nullable Entity entity, BlockState state, Level level, BlockPos pos) {
-        if (state.getValue(INSTRUMENT).worksAboveNoteBlock() || level.getBlockState(pos.above()).isAir()) {
+        /*if (state.getValue(INSTRUMENT).worksAboveNoteBlock() || level.getBlockState(pos.above()).isAir()) {
             level.blockEvent(pos, this, 0, 0);
             level.gameEvent(entity, GameEvent.NOTE_BLOCK_PLAY, pos);
-        }
+        }*/
     }
 
     @Override
@@ -118,22 +125,21 @@ public class NoteBlock extends Block {
 
     @Override
     protected InteractionResult useWithoutItem(BlockState state, Level level, BlockPos pos, Player player, BlockHitResult hitResult) {
-        if (!level.isClientSide()) {
+        /*if (!level.isClientSide()) {
             if (!io.papermc.paper.configuration.GlobalConfiguration.get().blockUpdates.disableNoteblockUpdates) state = state.cycle(NoteBlock.NOTE); // Paper - prevent noteblock note from updating
             level.setBlock(pos, state, Block.UPDATE_ALL);
             this.playNote(player, state, level, pos);
             player.awardStat(Stats.TUNE_NOTEBLOCK);
-        }
-
-        return InteractionResult.SUCCESS;
+        }*/
+        return InteractionResult.PASS;
     }
 
     @Override
     protected void attack(BlockState state, Level level, BlockPos pos, Player player) {
-        if (!level.isClientSide()) {
+        /*if (!level.isClientSide()) {
             this.playNote(player, state, level, pos);
             player.awardStat(Stats.PLAY_NOTEBLOCK);
-        }
+        }*/
     }
 
     public static float getPitchFromNote(int note) {
@@ -142,7 +148,7 @@ public class NoteBlock extends Block {
 
     @Override
     protected boolean triggerEvent(BlockState state, Level level, BlockPos pos, int id, int param) {
-        NoteBlockInstrument noteBlockInstrument = state.getValue(INSTRUMENT);
+        /*NoteBlockInstrument noteBlockInstrument = state.getValue(INSTRUMENT);
         // Paper start - move NotePlayEvent call to fix instrument/note changes
         org.bukkit.event.block.NotePlayEvent event = org.bukkit.craftbukkit.event.CraftEventFactory.callNotePlayEvent(level, pos, noteBlockInstrument, state.getValue(NOTE));
         if (event.isCancelled()) return false;
@@ -170,8 +176,8 @@ public class NoteBlock extends Block {
 
         level.playSeededSound(
             null, pos.getX() + 0.5, pos.getY() + 0.5, pos.getZ() + 0.5, holder, SoundSource.RECORDS, 3.0F, pitchFromNote, level.random.nextLong()
-        );
-        return true;
+        );*/
+        return false;
     }
 
     private @Nullable Identifier getCustomSoundId(Level level, BlockPos pos) {
